<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://www.gstatic.com/firebasejs/5.8.5/firebase.js"></script>
    <link rel="stylesheet" type="text/css" href="main.css">

    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous"> -->
    <title>Entronica Shared Knowledge</title>
   
   

    

  </head>
  <body>
    
    
    <h1 class="aa">Entronica Shared Knowledge</h1>
   
      <!-- <script src="app.js"></script> -->
      <!-- var name_val = docs.item;
      document.getElementById("name").innerHTML =name_val; -->

     
<section class="container" id="mainContainer">
 
  
</section>

<section class="footer" id="footer">
  <div class="row">
    <a href="index.html" class="buttonGreen">Active</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <a href="inActive.html" class="buttonRed">Inactive</a>
  </div>
  
  
    
</section>
      <!-- <script>
      document.getElementById("p1").innerHTML = "New text!";
      </script> -->

  </body>


  <script>
    // Initialize Firebase
  
    //config DB
    var config = {
      apiKey: "AIzaSyAZVpvZwtGIdMu66CWb8ITtVe_vl8w7iXg",
      authDomain: "entrosk-47bad.firebaseapp.com",
      databaseURL: "https://entrosk-47bad.firebaseio.com",
      projectId: "entrosk-47bad",
      storageBucket: "entrosk-47bad.appspot.com",
      messagingSenderId: "151238242204"
    };
    firebase.initializeApp(config);
    
    const db = firebase.firestore()
    var SKentro = db.collection("SKentro");
    

    // db.collection("SKentro").add({ 
    //     article: "นอนเลย",
    //     name: "Friend",
    //     dateTime: "",
    //     available: false,
    //     image: "",
    //     youtubeLink: ""
    //               })

    //Test Get database name SKentro by available=ture
    SKentro.where("available", "==", true)
        .orderBy("dateTime")
        .get()
        .then(function(querySnapshot) {
          
          console.log("P0WERED BY Group THE Fool")

          querySnapshot.forEach(function(doc) {
              // doc.data() is never undefined for query doc snapshots
              // console.log(doc.id, " => ", doc.data());
             
          
              var dbArticle = doc.data().article;
              var dbImg =  doc.data().image;
              var dbTime = doc.data().dateTime.toDate();
              var week = doc.data().week;
              var day = doc.data().day;
              var time = doc.data().time;
              // dbTime = new Date(dbTime);
              // var week = dbTime.split(' ').slice(0, 1).join(' ');
              // var day = dbTime.split(' ').slice(1, 2).join(' ');
              // var month = dbTime.split(' ').slice(2, 3).join(' ');
              // var year = dbTime.split(' ').slice(3, 4).join(' ');
              // var timeAll = dbTime.split(' ').slice(4, 5).join(' ');
              // var timeSplit = timeAll.split(':');
              // var timeHours = timeSplit[0];
              // timeHours = parseInt(timeHours,0) + 7;
              // timeHours = timeHours.toString();
              // var dateFinal = week+day+"-"+month+"-"+year+"("+timeHours+":"+timeSplit[1]+")";
              var daySplitDay = day.split("/")[0];
              var daySplitMonth = day.split("/")[1];
              switch(daySplitMonth){
                case "01":
                  var month = "Jan";
                break;
                case "02":
                  var month = "Feb";
                break;
                case "03":
                  var month = "Mar";
                break;
                case "04":
                  var month = "Apr";
                break;
                case "05":
                  var month = "May";
                break;
                case "06":
                  var month = "Jun";
                break;
                case "07":
                  var month = "Jul";
                break;
                case "08":
                  var month = "Aug";
                break;
                case "09":
                  var month = "Sep";
                break;
                case "10":
                  var month = "Oct";
                break;
                case "11":
                  var month = "Nov";
                break;
                case "12":
                  var month = "Dec";
                break;
                default:
                  var month = "-";
                   
              }
              var daySplitYear = day.split("/")[2];

              var dateFinal = week+" "+daySplitDay+"/"+month+"/"+daySplitYear+" "+"("+time+")";
              // console.log(dateFinal);
              var dbName = doc.data().name;
              var dbYoutube = doc.data().youtubeLink;


              const mainContainer = document.getElementById('mainContainer');
              const divClassContainer1 = document.createElement('div');
                    divClassContainer1.className = 'container1';
                    divClassContainer1.id = 'container1';
        

              const divImg = document.createElement('div');
                    divImg.id = 'divImg';

              const imgAll = document.createElement('img');
                    imgAll.id = 'imgAll';
                    imgAll.className = 'imgC';
                    imgAll.src = dbImg;
                    imgAll.width = '150';
                    imgAll.height = '150';

              const divTitle = document.createElement('div');
                    divTitle.id = 'divTitle';
                    divTitle.className = 'divTitle';

              const divTitle1 = document.createElement('div');
                    divTitle1.id = 'divTitle1';
                    divTitle1.className = 'title';

              const spanD = document.createElement('span');
                    spanD.id = 'spanDouble';
                    spanD.className = 'spandDiv';
                    spanD.textContent = '" ';
              

              const spanD1 = document.createElement('span');
              spanD1.id = 'spanDouble1';
              spanD1.className = 'spandDiv';
              spanD1.innerText = ' " ';

              const titleArticle = document.createElement('span');
              titleArticle.id = 'titleArticle';
              titleArticle.className = 'titleArticle'
              titleArticle.innerText = dbArticle;

              const person = document.createElement('div');
              person.className = 'person';
              person.id = 'person';

              const personDiv1 = document.createElement('div');
              personDiv1.id = 'personDiv1';

              const personDiv2 = document.createElement('div');
              personDiv2.id = 'personDiv2';

              const personDiv3 = document.createElement('div');
              personDiv3.id = 'personDiv3';

              const spanNamePerson = document.createElement('span');
              spanNamePerson.id = 'NamePerson';
              spanNamePerson.className = 'namePerson';
              spanNamePerson.innerText = dbName;

              const spanTimeStemp = document.createElement('span');
              spanTimeStemp.id = 'TimeStemp';
              spanTimeStemp.className = 'timeStemp';
              spanTimeStemp.innerText = dateFinal;

              const blockYoutubeDiv = document.createElement('div');
              blockYoutubeDiv.id = 'blockYoutubeDiv';
              blockYoutubeDiv.className = 'blockYoutube';

              const blockYoutubeDiv1 = document.createElement('div');
              blockYoutubeDiv1.id = 'blockYoutubeDiv1';
              

              const blockYoutubeDiv2 = document.createElement('div');
              blockYoutubeDiv2.id = 'blockYoutubeDiv2';
              

              const blockYoutubeDiv3 = document.createElement('div');
              blockYoutubeDiv3.id = 'blockYoutubeDiv3';
              blockYoutubeDiv3.className = 'letf';

              const imgYouTube = document.createElement('img');
              imgYouTube.id = 'imgUtube';
              imgYouTube.src = 'images/Youtube-icon.png';
              imgYouTube.width = '50';
              imgYouTube.height = '50';
              imgYouTube.className = 'youtubeImg';
             

              const linkYoutube = document.createElement('a');
              linkYoutube.id = 'linkYoutube';
              linkYoutube.className ='youtubeText';
              linkYoutube.text = dbArticle;
              linkYoutube.href = dbYoutube;

              /* Do Div class all*/
              mainContainer.appendChild(divClassContainer1);
              divClassContainer1.appendChild(divImg);
              divClassContainer1.appendChild(divTitle);
              divClassContainer1.appendChild(person);
              divClassContainer1.appendChild(blockYoutubeDiv);

              /* Do imgages Profile*/
              divImg.appendChild(imgAll);

              /* Do Article*/
              divTitle.appendChild(divTitle1);
              divTitle1.appendChild(spanD);
              divTitle1.appendChild(titleArticle);
              divTitle1.appendChild(spanD1);
              
              /* Do Name and time*/
              person.appendChild(personDiv1);
              person.appendChild(personDiv2);
              person.appendChild(personDiv3);
              personDiv2.appendChild(spanNamePerson);
              personDiv3.appendChild(spanTimeStemp);

              /* Do Youtube block*/
              blockYoutubeDiv.appendChild(blockYoutubeDiv1);
              blockYoutubeDiv.appendChild(blockYoutubeDiv2);
              blockYoutubeDiv.appendChild(blockYoutubeDiv3);
              blockYoutubeDiv2.appendChild(imgYouTube);
              blockYoutubeDiv3.appendChild(linkYoutube);

          });
          
          // const mainContainer = document.getElementById('mainContainer');
          // const divClassContainer2 = document.createElement('div');
          //       divClassContainer2.className = 'container2';
          //       divClassContainer2.id = 'container2';

          // const button1     = document.createElement('div');
          //       button1.id  = 'button1';

          //       mainContainer.appendChild(divClassContainer2);
          //       divClassContainer2.appendChild(button1);
      })
        .catch(function(error) {
            console.log("Error getting documents: ", error);
        });

        //function appendAfter
        Element.prototype.appendAfter = function(element) {
           element.parentNode.insertBefore(this, element.nextSibling);
        }

        
        
       
       
  </script>
</html>
